---
import { Party } from "../../components/Party";
import Layout from "../../layouts/Layout.astro";
import Modal from "../../components/Modal.astro";

const username = Astro.url.searchParams.get("username") ?? "anonymous";
const roomId = Astro.url.searchParams.get("roomId") ?? "astro-partykit-room";
---

<Layout title="Welcome to Astro.">
  <main>
    <div class="grid place-content-center">
      <h1 class="text-center">Astro 🚀 🤝 Partykit 🎈</h1>
      <Party username={username} roomId={roomId} client:load />

      <button
        id="leave-room-btn"
        class="bg-red-500 hover:bg-red-700 w-36 mx-auto text-white font-bold py-2 px-4 rounded"
        >Leave room</button
      >
      <Modal username={username} roomId={roomId} />
    </div>
  </main>
</Layout>
